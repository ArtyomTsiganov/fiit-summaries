### Ранг матрицы
```spoiler-markdown
Пусть $A$ - произвольная $k\times n$-матрица.
$$A = \begin{pmatrix} a_{11} & a_{12} & \cdots & a_{1i} & \cdots & a_{1n} \\ a_{21} & a_{22} & \cdots & a_{2i} & \cdots & a_{2n} \\ a_{31} & a_{32} & \cdots & a_{3i} & \cdots & a_{3n} \\ \vdots & \vdots & \ddots & \vdots & \ddots & \vdots \\ a_{k1} & a_{k2} & \cdots & a_{ki} & \cdots & a_{kn} \end{pmatrix}$$
- **Рангом матрицы по столбцам** - размерность подпространства, порождённого набором столбцов матрицы $A$, в пространстве всех столбцов высоты $k$ над полем $F$.
- **Рангом матрицы по строкам** - размерность подпространства. порождённого набором строк матрицы $A$, в пространстве всех строк длины $n$ над полем $F$.
```

### Теорема о ранге матрицы
Формулировка:
```spoiler-markdown
Ранги произвольной матрицы по строкам и по столбцам совпадают.
```

План доказательства:
```spoiler-markdown
- докажем, что элементарные преобразования не меняют ранг (по столбцам/по строкам). Так как элементарные преобразования обратимы, достаточно доказать, что они не увеличивают ранг.
- покажем, что с помощью элементарных преобразований любую матрицу можно привести к матрице, для которой $r(\text{столбцов})=r(\text{строк})$ будет очевидным.
```

### Лемма 1
Формулировка:
```spoiler-markdown
Элементарные преобразования над столбцами матрицы не увеличивают ранг матрицы по столбцам.
```

Д-во:
```spoiler-markdown
Ранг матрицы $A$ по столбцам - это размерность $\mathrm{dim}~S$ подпространства $S$, порожденного столбцами матрицы $A$. Элементарные преобразования над столбцами матрицы $A$ приводят к матрице $A'$, столбцы которой лежат в $S$, поэтому подпространство $S'$, порожденное столбцами матрицы $A'$, содержится в $S \implies \mathrm{dim}~S' \leq \mathrm{dim}~S$ $~~~\square$
```

### Лемма 2
Формулировка:
```spoiler-markdown
Элементарные преобразования над строками матрицы не увеличивают ранг матрицы по строкам.
```

Д-во:
```spoiler-markdown
Применим [[#Лемма 1|лемму 1]] к матрице $A^{T}$, получим то, что требовалось доказать.
```

### Лемма 3
Формулировка:
```spoiler-markdown
Элементарные преобразования над столбцами матрицы сохраняют линейные зависимости между её строками.
```

Д-во:
```spoiler-markdown
Пусть:
$$A = \begin{pmatrix} a_{11} & a_{12} & \cdots & a_{1j} & \cdots & a_{1n} \\ a_{21} & a_{22} & \cdots & a_{2j} & \cdots & a_{2n} \\ a_{31} & a_{32} & \cdots & a_{3j} & \cdots & a_{3n} \\ \vdots & \vdots & \ddots & \vdots & \ddots & \vdots \\ a_{k1} & a_{k2} & \cdots & a_{kj} & \cdots & a_{kn} \end{pmatrix}$$

строки с номерами $i_{1},\dots,i_{s}$ линейно зависимы в пространстве строк. Докажем, что и в матрице $A'$, полученной из $A$ применением элементарных преобразований над столбцами, строки с номером $i_{1},\dots,i_{s}$ остаются линейно зависимы с теми же коэффициентами. 

Итак, пусть строки матрицы
$$A = \begin{pmatrix} a_{11} & a_{12} & \cdots & a_{1j} & \cdots & a_{1n} \\ \vdots & \vdots & \ddots & \vdots & \ddots & \vdots \\ a_{i_{1}1} & a_{i_{1}2} & \cdots & a_{i_{1}j} & \cdots & a_{i_{1}n} \\ \vdots & \vdots & \ddots & \vdots & \ddots & \vdots \\ a_{i_{s}1} & a_{i_{s}2} & \cdots & a_{i_{s}j} & \cdots & a_{i_{s}n} \\ \vdots & \vdots & \ddots & \vdots & \ddots & \vdots \\ a_{k1} & a_{k2} & \cdots & a_{kj} & \cdots & a_{kn} \end{pmatrix}$$
c номерами $i_{1},\dots, i_{s}$ линейно зависимы. Существуют $\gamma_{1}, . . . , \gamma_{s}$, не все равные 0, что выполнена система равенств:
$$\gamma _{1}a_{i_{1}j} +\dots+ \gamma _{s}a_{i_{s}j} = 0 ~~~~ \forall{j=\overline{1,n}} ~~~~~(*)$$

Если переставить местами $j_{1}$-й и $j_{2}$-й столбцы, то в системе $(*)$ просто поменяются местами $j_{1}$-е и $i_{2}$-е равенства, т.е система не изменится. Значит в преобразованной матрице строки $i_{1},\dots,i_{s}$ остаются линейно зависимыми. 

Если прибавить к $j_{1}$-й столбцу матрицы $A$ её $j_{2}$-й столбец, то все равенства системы $(*)$ кроме $j_{1}$-го, не изменится, но и равенство, соответствующее $j_{1}$-му столбцу, остается верным, поскольку: 
$$\gamma_1 (a_{i_1 j_1} + a_{i_1 j_2}) + \cdots + \gamma_s (a_{i_s j_1} + a_{i_s j_2}) =$$
$$= (\gamma_1 a_{i_1 j_1} + \cdots + \gamma_s a_{i_s j_1}) + (\gamma_1 a_{i_1 j_2} + \cdots + \gamma_s a_{i_s j_2}) = 0 + 0 = 0$$

Аналогично, если умножить $j_{1}$-й столбец матрицы $A$ на скаляр $λ \neq 0$, то все равенства системы $(*)$, кроме $j_{1}$-го, не изменяться, но и равенство, соответствующее $j_{1}$-му столбцу, остается верным:
$$\gamma_1 (\lambda a_{i_1~j_1}) + \cdots + \gamma_s (\lambda a_{i_s~j_1}) = \lambda (\gamma_1 a_{i_1~j_1} + \cdots + \gamma_s a_{i_{s} ~j_1}) = \lambda \cdot 0 = 0 ~~~~~\square$$
```

Комментарий о линейной независимости:
```spoiler-markdown
В доказательстве леммы говорится лишь о линейно зависимых строках, а используется теорема для линейно независимых. На самом деле, примерно то же доказательство можно распространить и на линейно независимые строки. В начале необходимо взять тривиальную линейную комбинацию (нетривиальных потому что нет) и показать, что каждое элементарное преобразование не меняет тривиальность комбинации.
```
### Лемма 4
Формулировка:
```spoiler-markdown
Элементарные преобразования над строками матрицы сохраняют линейные зависимости между её столбцами.
```

Д-во:
```spoiler-markdown
Применим [[#Лемма 3|лемму 3]] к матрице $A^{T}$, получим то, что требовалось доказать.
```

### Следствие 3 и 4 лемм
Формулировка:
```spoiler-markdown
Элементарные преобразования над столбцами (строками) матрицы не увеличивают ранг по строкам (столбцам).
```

Д-во:
```spoiler-markdown
Пусть матрица $A'$ получена из матрицы $A$ некоторой последовательностью элементарных преобразований над столбцами и ранг матрицы $A'$ по строкам равен $s$. Тогда в $A'$ есть $s$ линейно независимых строк с номерами $i_{1},\dots,i_{s}$. По [[#Лемма 3|лемме 3]] строки матрицы $A$ с теми же номерами обязаны быть линейно независимы, а значит $r(A) \geq s$.

Тот же аргумент выводит симметричный результат из [[#Лемма 4|леммы 4]]. $~~~\square$
```

### Завершение доказательства теоремы
```spoiler-markdown
Теперь покажем, что с помощью элементарных преобразований любую матрицу $A$ можно привести к матрице, для которой равенство рангов по столбцам и строкам очевидно.

Если все элементы матрицы $A$ равны $0$, то понятно, что ранги $A$ и по столбцам, и по строкам равны 0. Если в $A$ есть ненулевой элемент, то с помощью преобразований переставим этот элемент на место $(1,1)$, а затем с помощью преобразований 2-го рода сделаем его равным $1$. Теперь с помощью преобразований 2 и 3 родов "обнулим" все остальные элементы первой строки и первого столбца: 
$$\begin{pmatrix} 1 & a_{12} & \cdots & a_{1j} & \cdots \\ a_{21} & a_{22} & \cdots & a_{2j} & \cdots \\ \vdots & \vdots & \ddots & \vdots & \ddots \\ a_{i1} & a_{i2} & \cdots & a_{ij} & \cdots \\ \vdots & \vdots & \ddots & \vdots & \ddots \end{pmatrix} \quad \longrightarrow \quad \begin{pmatrix} 1 & 0 & \cdots & 0 & \cdots \\ 0 & b_{22} & \cdots & b_{2j} & \cdots \\ \vdots & \vdots & \ddots & \vdots & \ddots \\ 0 & b_{i2} & \cdots & b_{ij} & \cdots \\ \vdots & \vdots & \ddots & \vdots & \ddots \end{pmatrix}$$

Продолжая описанный процесс, мы приведем матрицу $A$ к виду:
$$\begin{pmatrix} 1 & 0 & \cdots & 0 & 0 & \cdots \\ 0 & 1 & \cdots & 0 & 0 & \cdots \\ \vdots & \vdots & \ddots & \vdots & \vdots & \ddots \\ 0 & 0 & \cdots & 1 & 0 & \cdots \\ 0 & 0 & \cdots & 0 & 0 & \cdots \\ \vdots & \vdots & \ddots & \vdots & \vdots & \ddots \end{pmatrix}$$
где на местах $(1,1); (2,2);\dots;(r,r)$ стоят $1$, а на всех остальных местах стоят $0$. У такой матрицы ранг и по столбцам, и по строкам равны $r$: первые $r$ столбцов линейно независимы, а остальные нулевые, также для строк. $~~~\square$
```

### Ранг линейного оператора и его матрицы
Формулировка:
```spoiler-markdown
Пусть $\mathcal{A}: V \to W$ - линейный оператор конечномерного векторного пространства $V$ в конечномерное векторное пространство $W$. Тогда ранг $\mathcal{A}$ равен рангу его матрицы.
```

Д-во:
```spoiler-markdown
Напомним, что $r(\mathcal{A}) = \mathrm{dim}(\mathrm{Im}~\mathcal{A})$
Так как пространство $W$ конечномерно, с оператором $\mathcal{A}$ связывается его матрица $[\mathcal{A}]$, столбцы которой - это координаты образов элементов базиса пространства $V$ в базисе пространства $W$.
Образы элементов базиса пространства $V$ порождают $\mathrm{Im}~\mathcal{A}$, а значит 
$$r(\mathcal{A}) = \mathrm{dim}(\mathrm{Im}~\mathcal{A}) = \mathrm{dim}~(\text{столбцы}~ [\mathcal{A}]) = r[\mathcal{A}] ~~~~~\square$$
```
